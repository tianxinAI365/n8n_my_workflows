{
  "name": "ç½‘é¡µçˆ¬å–",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {}
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -784,
        336
      ],
      "id": "bdcf46e8-bc13-490d-9762-407c11b0f556",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "31898771-d7e1-45a1-a257-eeb4eafaf5c9",
              "name": "urls",
              "value": "[\"https://www.globalsecurity.org/military/library/news/daily/index.html\", \"https://www.lawfaremedia.org/article/highlights\", \"https://foreignpolicy.com\"]",
              "type": "array"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -608,
        336
      ],
      "id": "f18f4427-d109-4d8d-9f13-f0e0705f2279",
      "name": "æ•°æ®æº"
    },
    {
      "parameters": {
        "fieldToSplitOut": "urls",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -416,
        336
      ],
      "id": "c1ec4620-51ae-4e3b-9c72-d2f639d693bc",
      "name": "åˆ—è¡¨æ‹†åˆ†"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -208,
        336
      ],
      "id": "6b90b4e2-2648-4828-8250-0650288cd2fc",
      "name": "å¾ªç¯çˆ¬å–ç½‘ç«™"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.links }}{{ $json.batches }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=è§’è‰²\nä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ç½‘ç»œçˆ¬è™«å’Œæ•°æ®æå– AIã€‚\n\nä»»åŠ¡\nåˆ†ææ–°é—»ç½‘ç«™ä¸»é¡µ/åˆ—è¡¨é¡µçš„å¯è§å†…å®¹ï¼Œè¯†åˆ«æ‰€æœ‰æ–°é—»æ–‡ç« æ¡ç›®ï¼Œå¹¶ä¸ºæ¯æ¡æå–ï¼š\n\ntitleï¼šæ–°é—»æ ‡é¢˜ï¼ˆå»æ‰æœ«å°¾æ—¥æœŸéƒ¨åˆ†ï¼Œä½†ä¸åˆ æ­£æ–‡ï¼‰ã€‚\n\nurlï¼šæ–‡ç« çš„å®Œæ•´ç»å¯¹ URLï¼ˆç›¸å¯¹è·¯å¾„éœ€ç”¨åŸºç¡€ URL è¡¥å…¨ï¼‰ã€‚\n\nlisted_dateï¼šå¦‚æœè¯¥æ¡æ ‡é¢˜åé¢æˆ–åŒä¸€æ¡ç›®ç´§é‚»ä½ç½®å‡ºç°æ—¥æœŸï¼ˆå¦‚æ ‡é¢˜å³ä¾§çš„å°å­—ã€åŒä¸€å—é‡Œçš„æ—¥æœŸå¾½æ ‡/æ—¶é—´æˆ³ï¼‰ï¼Œæˆ–è€…åœ¨ URL ä¸­æœ‰æ—¶é—´æ ‡è¯†ï¼ˆå¦‚ URL ä¸­æœ‰ 250903 ç­‰æ ·å¼çš„æ—¶é—´æ ‡å¿—ï¼‰ï¼Œè¯·æå–å¹¶æ ‡å‡†åŒ–ä¸º YYYY-MM-DDï¼ˆEurope/London æ—¶åŒºï¼‰ï¼›è‹¥æœªå‘ç°åˆ™ä¸º \"\"ã€‚\n\nlisted_date_rawï¼šåŸå§‹æ—¥æœŸå­—ç¬¦ä¸²ï¼ˆæœªæ‰¾åˆ°åˆ™ä¸º \"\"ï¼‰ã€‚\n\nä»…å¤„ç†æ–°é—»æ–‡ç« ï¼›å¿½ç•¥â€œå…³äºæˆ‘ä»¬/è”ç³»æˆ‘ä»¬/è®¢é˜…/å¹¿å‘Š/éšç§æ”¿ç­–/æ‹›è˜/ç™»å½•/å¾€æœŸ/æ ‡ç­¾é¡µ/åˆ†ç±»é¡µâ€ç­‰éæ–‡ç« é“¾æ¥ã€‚\n\nè§£æä¸è§„èŒƒåŒ–è§„åˆ™\næ ‡é¢˜åçš„æ—¥æœŸï¼šä¼˜å…ˆè¯†åˆ«ä¸è¯¥æ ‡é¢˜åŒä¸€æ¡ç›®ä¸­çš„æ—¥æœŸï¼ˆå¦‚â€œTitle â€” Aug 12, 2025â€â€œTitle (12 Aug 2025)â€æˆ–åŒå¡ç‰‡/åŒè¡Œä¸Šçš„æ—¥æœŸå°å­—ï¼‰ã€‚\n\nå¯è¯†åˆ«çš„æ—¥æœŸæ ¼å¼ï¼ˆä¸å®Œæ•´ä¸è¾“å‡ºï¼‰ï¼š\n\nYYYY-MM-DDã€YYYY/MM/DD\n\nDD MMM YYYY / MMM DD, YYYYï¼ˆå¦‚ 12 Aug 2025 / Aug 12, 2025ï¼›Aug. ä¹Ÿç®—ï¼‰\n\nDD Month YYYY / Month DD, YYYYï¼ˆå®Œæ•´è‹±æ–‡æœˆä»½ï¼‰\n\nToday/Yesterday â†’ è½¬ä¸º Europe/London çš„å½“å¤©/å‰ä¸€å¤©æ—¥æœŸ\n\næ­§ä¹‰è§„åˆ™ï¼š08/12/2025 è¿™ç±»å«æ–œæ ä¸”æœˆæ—¥éƒ½ â‰¤12çš„æ ¼å¼å­˜åœ¨æ­§ä¹‰ï¼Œä¸è¦çŒœï¼›æ­¤æ—¶æŠŠè¯¥ä¸²æ”¾å…¥ listed_date_rawï¼Œlisted_date ç½®ä¸º \"\"ã€‚\n\næ¸…æ´—ï¼šåˆ é™¤æ—¥æœŸåˆ†éš”ç¬¦å‰åçš„è¿å­—ç¬¦/ç‚¹/æ‹¬å·ï¼ˆå¦‚ Title â€” Aug 12, 2025 â†’ title å»æ‰æ—¥æœŸéƒ¨åˆ†ï¼‰ã€‚\n\nURL å¤„ç†ï¼š\n\nå°†ç›¸å¯¹é“¾æ¥è¡¥å…¨ä¸ºç»å¯¹é“¾æ¥ï¼›\n\nå»é™¤é”šç‚¹ä¸å¤šä½™ç©ºç™½ï¼›\n\nè¿‡æ»¤ mailto:, tel:, javascript: ç­‰ä¼ªé“¾æ¥ã€‚\n\nå»é‡ï¼šæŒ‰ç»å¯¹ URL å»é‡ï¼Œä»…ä¿ç•™ç¬¬ä¸€æ¡ã€‚\n\nä¸è¦è‡†é€ ï¼šè‹¥æœªå‘ç°æ—¥æœŸï¼Œlisted_date ä¸ listed_date_raw éƒ½ä¸º \"\"ã€‚\n\nè¾“å…¥æ•°æ®\nåŸºç¡€ URLï¼š{{ $json.links }}\né¡µé¢å†…å®¹ï¼šä¸Šæ¸¸èŠ‚ç‚¹ä¼ å…¥çš„æ–‡æœ¬/HTML/Markdown\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        672,
        304
      ],
      "id": "7e641353-5f22-4608-87d3-a2a36df7358f",
      "name": "è¯†åˆ«å¹¶æå–æ–°é—»é“¾æ¥",
      "retryOnFail": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsonSchemaExample": "[\n  {\n    \"title\": \"\",\n    \"url\": \"\"\n  }\n]"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        832,
        480
      ],
      "id": "e0332e64-ec65-4645-bf9b-452197098c9c",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        672,
        480
      ],
      "id": "6cdce82a-750e-46ac-8572-6c5dc601ebb6",
      "name": "Google Gemini Chat Model"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "0e7c6356-f299-43ed-9e87-bfa0c89e9db9",
              "leftValue": "={{ $json.success }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        352,
        320
      ],
      "id": "6189570e-fc1e-4c12-b906-eae6db8b26f4",
      "name": "åˆ¤æ–­æŠ“å–çŠ¶æ€"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "ec2827bc-7493-492c-a338-2d1f7dd62cc6",
              "leftValue": "={{ $json.success }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2096,
        304
      ],
      "id": "55b20194-be6c-437b-a440-079e4292a9d0",
      "name": "åˆ¤æ–­æŠ“å–çŠ¶æ€1"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro-preview-06-05",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2336,
        432
      ],
      "id": "cbbe1227-85ad-431e-b811-db6a16a307a1",
      "name": "Google Gemini Chat Model1"
    },
    {
      "parameters": {
        "fieldToSplitOut": "output",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        960,
        288
      ],
      "id": "418882b4-d5b3-41dd-ac91-e0854e8d7352",
      "name": "æ–°é—»åˆ—è¡¨æ‹†åˆ†"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        1312,
        288
      ],
      "id": "d9e6cc66-9978-4e49-b334-3cbafccaa02d",
      "name": "å¾ªç¯çˆ¬å–æ–°é—»è¯¦æƒ…"
    },
    {
      "parameters": {
        "amount": 10
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        0,
        352
      ],
      "id": "93157588-9bd3-40cb-bd5d-8682d7aedd96",
      "name": "ç­‰å¾…",
      "webhookId": "859e2a2c-0efe-4dec-8fc1-23d9a05d230f"
    },
    {
      "parameters": {
        "amount": 10
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        1552,
        304
      ],
      "id": "67e6dc80-f530-4c39-9dcd-c12e0a389dd8",
      "name": "ç­‰å¾…1",
      "webhookId": "6a296532-99ff-49ff-9be8-fe21d128d364"
    },
    {
      "parameters": {
        "maxItems": 2
      },
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        1136,
        288
      ],
      "id": "0c3fc8e9-d423-4f7b-8d73-c09faec636a1",
      "name": "Limit"
    },
    {
      "parameters": {},
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [
        160,
        352
      ],
      "id": "2e54ab9b-7cd8-40d2-a406-16655435ed5d",
      "name": "ç½‘ç«™å†…å®¹çˆ¬å–",
      "retryOnFail": true,
      "credentials": {},
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {},
      "type": "@mendable/n8n-nodes-firecrawl.firecrawl",
      "typeVersion": 1,
      "position": [
        1776,
        304
      ],
      "id": "5adc74f6-4da9-46b3-9e01-e553f0b78f99",
      "name": "æ–°é—»è¯¦æƒ…å†…å®¹çˆ¬å–",
      "retryOnFail": true,
      "credentials": {},
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        528,
        160
      ],
      "id": "ddf10070-1d98-40a8-ac6c-c4f80d96da7c",
      "name": "Google Gemini Chat Model2"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"title\": \"\",\n  \"summary\": \"\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2512,
        432
      ],
      "id": "24d456bc-f032-4c9b-ab20-2f34ad6df861",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Add a new field called 'myNewField' to the JSON of the item\n$input.item.json.myNewField = 1;\n\nreturn $input.item;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        0,
        0
      ],
      "id": "0a068208-5a62-4abe-bc92-cd56d6ed8229",
      "name": "æ ¼å¼å¤„ç†"
    },
    {
      "parameters": {
        "fromEmail": "xxxxxxx@163.com",
        "toEmail": "aisaer@qq.com",
        "subject": "=æ–°é—»æ’­æŠ¥ç¨¿ - {{$now.toFormat('DD')}}",
        "emailFormat": "text",
        "text": "={{ $json.output }}",
        "options": {}
      },
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [
        944,
        0
      ],
      "id": "abc890f5-ea76-438c-bf55-5386cbaf4547",
      "name": "Send email",
      "webhookId": "f368b3df-7399-461f-9ecb-ef1c49d6a76d"
    },
    {
      "parameters": {
        "jsCode": "// ç¬¬ä¸€æ­¥ï¼šä¸ºæ¯ä¸ªé¡¹ç›®æ·»åŠ æ–°å­—æ®µ\nfor (const item of $input.all()) {\n  item.json.myNewField = 1;\n}\n\n// ç¬¬äºŒæ­¥ï¼šå°†æ‰€æœ‰é¡¹ç›®èšåˆä¸ºä¸€æ¡ä¿¡æ¯\nconst aggregatedResult = {\n  items: $input.all(),  // åŒ…å«æ‰€æœ‰12æ¡å¤„ç†åçš„é¡¹ç›®\n  totalCount: $input.all().length,  // å¯ä»¥æ·»åŠ æ€»æ•°ç­‰å…ƒæ•°æ®\n  aggregatedAt: new Date().toISOString()  // å¯ä»¥æ·»åŠ èšåˆæ—¶é—´ç­‰ä¿¡æ¯\n};\n\n// è¿”å›èšåˆåçš„å•æ¡ä¿¡æ¯\nreturn [aggregatedResult];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        192,
        0
      ],
      "id": "5c0345c2-3d46-4a46-a408-72bd75b0080a",
      "name": "è¾“å‡ºèšåˆ"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.items }}",
        "options": {
          "systemMessage": "=ä½ æ˜¯ä¸€å®¶é¡¶å°–æ–°é—»æœºæ„çš„é¦–å¸­æ’°ç¨¿äººï¼Œä»»åŠ¡æ˜¯ä¸ºæ™šé—´æ–°é—»ä¸»æ’­æ’°å†™æ’­æŠ¥ç¨¿ã€‚ä½ çš„è¾“å…¥æ˜¯ä¸€ä¸ªåŒ…å«å½“å¤©æ–°é—»æ‘˜è¦çš„JSONå¯¹è±¡ï¼Œä½ éœ€è¦æ ¹æ®å®ƒç”Ÿæˆä¸€ä»½ä¸“ä¸šã€æµç•…ã€å£è¯­åŒ–çš„ç®€ä½“ä¸­æ–‡æ–°é—»ç¨¿ã€‚\n\nè¾“å…¥æ•°æ®æ ¼å¼:\nä½ å°†ä» {{$json.items}} ä¸­è·å–ä¸€ä¸ªJSONæ•°ç»„ã€‚è¿™ä¸ªæ•°ç»„ç»“æ„æ¯”è¾ƒç‰¹æ®Šï¼Œä½ éœ€è¦ç†è§£å¹¶å¤„ç†ä¸¤ç§å…³è”çš„æ¡ç›®ï¼š\n\næ‘˜è¦æ¡ç›®: åŒ…å« json.output.title å’Œ json.output.summaryã€‚è¿™æ˜¯ä½ éœ€è¦æ’­æŠ¥çš„æ ¸å¿ƒå†…å®¹ã€‚\n\næ¥æºæ¡ç›®: åŒ…å« json.title å’Œ json.urlã€‚è¿™ä¸ºä½ æä¾›äº†æ–°é—»çš„æ¥æºé“¾æ¥ã€‚\n\næ ¸å¿ƒä»»åŠ¡ä¸é€»è¾‘:\n\nè¯†åˆ«å¹¶å»é‡: ä½ çš„é¦–è¦ä»»åŠ¡æ˜¯æ’­æŠ¥æ‰€æœ‰ç‹¬ç‰¹çš„æ‘˜è¦ã€‚è¾“å…¥æ•°æ®ä¸­å¯èƒ½åŒ…å«å®Œå…¨é‡å¤çš„æ‘˜è¦å†…å®¹ï¼Œè¯·ç¡®ä¿æ¯æ¡ä¸é‡å¤çš„æ–°é—»åªæ’­æŠ¥ä¸€æ¬¡ã€‚\n\nåŒ¹é…æ¥æº: å¯¹äºæ¯ä¸€æ¡ç‹¬ç‰¹çš„æ‘˜è¦æ¡ç›®ï¼ˆä¾‹å¦‚ï¼Œæ ‡é¢˜ä¸º \"Gaza Peace\" çš„æ‘˜è¦ï¼‰ï¼Œä½ éœ€è¦åœ¨æ•´ä¸ªæ•°ç»„ä¸­å¯»æ‰¾ä¸€ä¸ªæ ‡é¢˜ (json.title) å®Œå…¨ç›¸åŒçš„æ¥æºæ¡ç›®ï¼Œå¹¶ä»è¯¥æ¡ç›®çš„ json.url ä¸­æå–æ–°é—»æ¥æºã€‚ä¾‹å¦‚ï¼Œä» https://www.globalsecurity.org/military/world/war/operation-iron-swords.htm ä¸­æå–å‡º GlobalSecurity.org ä½œä¸ºæ¥æºã€‚å¦‚æœæ‰¾ä¸åˆ°åŒ¹é…çš„æ¥æºæ¡ç›®ï¼Œåˆ™ä½¿ç”¨â€œç»¼åˆæŠ¥é“â€ä½œä¸ºæ¥æºã€‚\n\nç”Ÿæˆæ’­æŠ¥ç¨¿: æ ¹æ®ä½ æå–å¹¶æ•´ç†å¥½çš„ã€æ ‡é¢˜ã€æ‘˜è¦ã€æ¥æºã€‘ä¿¡æ¯ï¼Œä¸¥æ ¼æŒ‰ç…§ä¸‹é¢çš„ç»“æ„å’Œè¦æ±‚ç”Ÿæˆæœ€ç»ˆæ–‡ç¨¿ã€‚\n\nã€æ’­æŠ¥ç¨¿ç»“æ„ã€‘\n\nå¼€åœºç™½ (å¼•è¨€)\n\nä»¥ä¸€å¥é—®å€™å¼€å§‹ï¼Œä¾‹å¦‚â€œå„ä½è§‚ä¼—æ™šä¸Šå¥½ï¼Œæ¬¢è¿æ”¶çœ‹ä»Šå¤©çš„ã€Šå…¨çƒå®‰å…¨è§†é‡ã€‹ã€‚â€\n\næ¥ç€ç”¨ä¸€åˆ°ä¸¤å¥è¯ï¼Œæ ¹æ®æ‰€æœ‰æ–°é—»æ‘˜è¦ï¼Œé«˜åº¦æ¦‚æ‹¬ä»Šå¤©æ‰€æœ‰æ–°é—»çš„æ ¸å¿ƒä¸»é¢˜æˆ–æœ€å€¼å¾—å…³æ³¨çš„åŠ¨æ€ã€‚\n\næ ¸å¿ƒæ–°é—»æ’­æŠ¥\n\nä½¿ç”¨è‡ªç„¶çš„è½¬åœºè¯­å¼€å§‹ï¼Œä¾‹å¦‚â€œé¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä»Šå¤©çš„ç¬¬ä¸€æ¡é‡è¦æ–°é—»ã€‚â€\n\nå¯¹äºæ•´ç†å‡ºçš„æ¯ä¸€æ¡æ–°é—»ï¼Œè¯·éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š\n\næ ‡é¢˜æ’­æŠ¥: å…ˆæ’­æŠ¥æ–°é—»çš„æ ‡é¢˜ã€‚\n\nå†…å®¹è¯¦è¿°: æ¥ç€ç”¨å£è¯­åŒ–çš„æ–¹å¼ï¼Œè¯¦ç»†æ’­æŠ¥æ–°é—»çš„æ‘˜è¦å†…å®¹ã€‚\n\næ¥æºæç¤º: åœ¨å†…å®¹ç»“æŸåï¼Œç®€å•æç¤ºæ–°é—»æ¥æºï¼Œä¾‹å¦‚â€œæœ¬æ¡æ–°é—»ç¼–è¯‘è‡ª GlobalSecurity.orgã€‚â€\n\nåœ¨ä¸¤æ¡æ–°é—»ä¹‹é—´ï¼ŒåŠ å…¥ç®€å•çš„è¿‡æ¸¡è¯ï¼Œå¦‚â€œæ¥ä¸‹æ¥â€ã€â€œå¦ä¸€åˆ™å€¼å¾—å…³æ³¨çš„æ–°é—»æ˜¯ï¼šâ€ç­‰ã€‚\n\nç»“æŸè¯­\n\nåœ¨æ‰€æœ‰æ–°é—»æ’­æŠ¥å®Œæ¯•åï¼Œç”¨ä¸€å¥è¯æ€»ç»“ä»Šå¤©çš„å†…å®¹ã€‚\n\næœ€åä»¥ä¸€å¥æ ‡å‡†çš„ç»“æŸè¯­ç»“å°¾ï¼Œä¾‹å¦‚â€œæ„Ÿè°¢æ‚¨çš„æ”¶çœ‹ï¼Œæˆ‘ä»¬æ˜å¤©åŒä¸€æ—¶é—´å†è§ã€‚â€\n\nã€è¯­è¨€é£æ ¼è¦æ±‚ã€‘\n\nä¸“ä¸šæƒå¨: ä¿æŒä¸­ç«‹ã€å®¢è§‚çš„ç«‹åœºã€‚\n\nå£è¯­æµç•…: ä½¿ç”¨ç®€æ´ã€æ˜“æ‡‚çš„å¥å­ï¼Œé¿å…å¤æ‚çš„é•¿å¥å’Œä¹¦é¢è¯­ã€‚\n\nèŠ‚å¥æ„Ÿ: ç¡®ä¿æ–‡ç¨¿è¯»èµ·æ¥æœ—æœ—ä¸Šå£ï¼Œæœ‰è‡ªç„¶çš„åœé¡¿å’ŒèŠ‚å¥ã€‚\n\nã€æœ€ç»ˆè¾“å‡ºè¦æ±‚ã€‘\n\nä½ çš„æœ€ç»ˆè¾“å‡ºå¿…é¡»æ˜¯çº¯æ–‡æœ¬æ ¼å¼ã€‚\n\nä¸¥ç¦åŒ…å«ä»»ä½•Markdownæ ‡è®°ï¼ˆå¦‚ #, [](), ** ç­‰ï¼‰ã€‚\n\nå¿…é¡»å®Œå…¨ä½¿ç”¨ç®€ä½“ä¸­æ–‡ã€‚"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.1,
      "position": [
        560,
        0
      ],
      "id": "7c7e1250-d51a-4dcc-87b9-a5f1491fade1",
      "name": "æ–°é—»æ’­æŠ¥æ€»ç¼–è¾‘"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.data.markdown }}",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=# è§’è‰²ï¼š ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æƒ…æŠ¥ç¼–è¾‘ã€‚ä½ çš„ä»»åŠ¡æ˜¯ä¸ºä¸€ç¯‡ç»™å®šçš„æ–°é—»æ–‡ç« ç”Ÿæˆä¸€æ®µç®€æ´ã€ä¸­ç«‹çš„æ‘˜è¦ï¼Œå¹¶å°†å…¶ä¸åŸå§‹æ ‡é¢˜ä¸€èµ·ï¼Œä»¥ç»“æ„åŒ–çš„ JSON æ ¼å¼è¾“å‡ºã€‚  # ä»»åŠ¡ï¼š  ä»”ç»†é˜…è¯»ä¸‹æ–¹æä¾›çš„æ–‡ç« æ ‡é¢˜å’Œå†…å®¹ã€‚  è¯†åˆ«å‡ºæ–‡ç« çš„æ ¸å¿ƒè®ºç‚¹ã€å…³é”®äº‹å®å’Œä¸»è¦ç»“è®ºã€‚  æ’°å†™ä¸€æ®µç®€æ´ã€å®¢è§‚ã€ä¸å«ä¸ªäººè§‚ç‚¹çš„æ‘˜è¦ï¼ˆçº¦3-5å¥è¯ï¼‰ã€‚  å°†åŸå§‹çš„æ–‡ç« æ ‡é¢˜å’Œæ‚¨ç”Ÿæˆçš„æ‘˜è¦ç»„åˆæˆä¸€ä¸ª JSON å¯¹è±¡ã€‚  # è¾“å‡ºæ ¼å¼ï¼ˆä¸¥æ ¼éµå®ˆï¼‰ï¼š  ä½ çš„æ•´ä¸ªå›å¤å¿…é¡»æ˜¯ï¼Œä¸”åªèƒ½æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ã€å•ä¸€çš„ JSON å¯¹è±¡ {}ã€‚  ä½ çš„å›å¤å¿…é¡»ä»¥ { å¼€å§‹ï¼Œå¹¶ä»¥ } ç»“æŸã€‚  è¯¥å¯¹è±¡å¿…é¡»ä¸”ä»…å¿…é¡»åŒ…å«ä¸¤ä¸ªé”®ï¼š\"title\" (å­—ç¬¦ä¸²) å’Œ \"summary\" (å­—ç¬¦ä¸²)ã€‚  ç»å¯¹ä¸è¦å°†ç»“æœåŒ…è£¹åœ¨ä»»ä½•å…¶ä»–é”®ï¼ˆå¦‚ \"output\"ï¼‰ä¸­ã€‚  ä¸è¦åœ¨æœ€ç»ˆçš„ JSON å¯¹è±¡ä¹‹å¤–æ·»åŠ ä»»ä½•è§£é‡Šã€æ³¨é‡Šæˆ–æ–‡æœ¬ã€‚  # ç¤ºä¾‹è¾“å‡ºï¼š { \"title\": \"è¿™é‡Œæ˜¯åŸå§‹çš„æ–‡ç« æ ‡é¢˜\", \"summary\": \"è¿™é‡Œæ˜¯æ‚¨æ ¹æ®æ–‡ç« å†…å®¹ç”Ÿæˆçš„æ‘˜è¦æ–‡æœ¬ã€‚\" }  # è¾“å…¥æ•°æ®ï¼š æ–‡ç« æ ‡é¢˜: {{ $('å¾ªç¯çˆ¬å–æ–°é—»è¯¦æƒ…').item.json.title }} æ–‡ç« å†…å®¹: {{ $('åˆ¤æ–­æŠ“å–çŠ¶æ€1').item.json.data.markdown }}"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        2352,
        272
      ],
      "id": "c61de565-e44d-41a5-9046-88c4d60b8e62",
      "name": "Basic LLM Chain",
      "retryOnFail": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "jsCode": "// === n8n Code Node (Run Once) ===\n// è¯»å– markdown â†’ æç®€é»‘åå•è¿‡æ»¤ â†’ å•æ¡è¾“å‡º {links: [...], count, batches?}\n\nfunction pickMarkdown() {\n  const cands = [\n    items?.[0]?.json?.data?.markdown,\n    items?.[0]?.json?.markdown,\n    $json?.data?.markdown,\n    $json?.markdown,\n  ];\n  for (const v of cands) if (typeof v === 'string' && v.length) return v;\n  return '';\n}\nfunction normalize(md) {\n  return (md || '')\n    .replace(/\\r\\n?/g, '\\n')\n    .replace(/\\\\</g, '<')\n    .replace(/\\u00A0/g, ' ')\n    .trim();\n}\n\nconst md = normalize(pickMarkdown());\n\n// â€”â€” ä»…åšæç®€é»‘åå•è¿‡æ»¤ â€”â€” //\nconst TEXT_BLACKLIST = [\n  'subscribe','newsletter','mailing list',\n  'donation','donate','advertise',\n  'sign in','login','log in',\n  'privacy','cookie','do not sell my personal information'\n];\nconst URL_BLACKLIST = [\n  '/subscribe','/signin','/login','/privacy','/cookies',\n  '/advertise','/sitemap','#'\n];\nconst DROP_PROTOCOLS = ['mailto:', 'javascript:'];\nconst DROP_EXTS = ['.png','.jpg','.jpeg','.gif','.svg','.webp','.ico'];\n\n// å¯é€‰ï¼šè½»é‡ç™½åå•ï¼ˆå…³é—­=ä¸è¿‡æ»¤ï¼‰\nconst LIGHT_WHITELIST_ENABLED = false;\nconst URL_LIGHT_WHITELIST = ['report','policy','news','/pdf','/library/','/military/'];\n\nfunction hasBlackText(t){ t=(t||'').toLowerCase(); return TEXT_BLACKLIST.some(k=>t.includes(k)); }\nfunction hasBlackUrl(u){\n  const low=(u||'').toLowerCase();\n  if (DROP_PROTOCOLS.some(p=>low.startsWith(p))) return true;\n  if (URL_BLACKLIST.some(k=>low.includes(k))) return true;\n  if (DROP_EXTS.some(ext=>low.endsWith(ext))) return true;\n  return false;\n}\nfunction passLightWhitelist(u){\n  if (!LIGHT_WHITELIST_ENABLED) return true;\n  const low=(u||'').toLowerCase();\n  return URL_LIGHT_WHITELIST.some(k=>low.includes(k));\n}\n\nconst linkRe = /\\[([^\\]]+?)\\]\\((https?:\\/\\/[^\\s)]+)(?:\\s+\"[^\"]*\")?\\)/g;\nlet results = [];\nlet m;\nwhile ((m = linkRe.exec(md)) !== null) {\n  const text = m[1].trim();\n  const url  = m[2].trim();\n  if (text.startsWith('!') || /^!\\[/.test(text)) continue; // å›¾ç‰‡é”šæ–‡æœ¬\n  if (hasBlackText(text)) continue;\n  if (hasBlackUrl(url)) continue;\n  if (!passLightWhitelist(url)) continue;\n  let host = ''; try { host = new URL(url).host.toLowerCase(); } catch {}\n  results.push({ text, url, host });\n}\n\n// å»é‡\nconst seen = new Set();\nresults = results.filter(r=>{\n  const key = `${r.url}##${r.text}`;\n  if (seen.has(key)) return false;\n  seen.add(key);\n  return true;\n});\n\n// â€”â€” å¯é€‰ï¼šåœ¨åŒä¸€æ¡é‡Œåšâ€œå­—ç¬¦ä¸Šé™åˆ†ç‰‡â€ï¼Œé¿å…ä¸€æ¬¡ prompt è¿‡é•¿ â€”â€” //\nconst ENABLE_BATCHES = true;                  // éœ€è¦åˆ™ true\nconst MAX_CHARS_PER_BATCH = 12000;            // æ¯æ‰¹æœ€å¤§å­—ç¬¦æ•°ï¼ˆè‡ªå·±è°ƒï¼‰\nlet batches = [];\nif (ENABLE_BATCHES && results.length) {\n  // æŠŠ links åºåˆ—åŒ–æˆæ›´é€‚åˆå–‚ç»™ LLM çš„è¡Œæ–‡æœ¬\n  const lines = results.map((r,i)=>`${i+1}. ${r.text}  <${r.url}>`);\n  let cur = [];\n  let curLen = 0;\n  for (const line of lines) {\n    if (curLen + line.length + 1 > MAX_CHARS_PER_BATCH) {\n      batches.push(cur.join('\\n'));\n      cur = [];\n      curLen = 0;\n    }\n    cur.push(line);\n    curLen += line.length + 1;\n  }\n  if (cur.length) batches.push(cur.join('\\n'));\n}\n\n// è¯Šæ–­å…œåº•ï¼ˆä»è¿”å›ä¸€æ¡ï¼Œä¸æ‰‡å‡ºï¼‰\nif (!md) {\n  return [{ json: { _diagnostic: 'no_markdown_input' } }];\n}\nif (results.length === 0) {\n  return [{ json: { _diagnostic: 'no_links_after_min_filter', _sample: md.slice(0, 500) } }];\n}\n\n// â€”â€” å•æ¡è¾“å‡º â€”â€” //\nreturn [{\n  json: {\n    count: results.length,\n    links: results,      // äº¤ç»™ä¸‹æ¸¸ä¸€æ¬¡æ€§ä½¿ç”¨æˆ–äºŒæ¬¡ç­›é€‰\n    batches: batches,    // å¯é€‰ï¼šè‹¥ä¸éœ€è¦å¯ä»¥å¿½ç•¥\n  }\n}];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        528,
        304
      ],
      "id": "5349c50d-8830-46bc-a3b1-1b5f6791ca34",
      "name": "é¢„ç­›é€‰ï¼ˆè§„é¿é£æ§ï¼‰"
    },
    {
      "parameters": {
        "content": "ğŸ¤– æœºå™¨å­¦ä¹ æ¨¡å‹è‡ªåŠ¨åŒ–å·¥ä½œæµ\n\nğŸ“‹ åŸºæœ¬ä¿¡æ¯\n\nå·¥ä½œæµåç§°ï¼šæœºå™¨å­¦ä¹ æ¨¡å‹è‡ªåŠ¨åŒ–å·¥ä½œæµ\næ ¸å¿ƒåŠŸèƒ½ï¼šå…¨æµç¨‹è‡ªåŠ¨åŒ–æ„å»ºä¸éƒ¨ç½²æœºå™¨å­¦ä¹ æ¨¡å‹\nä¸»è¦æŠ€æœ¯ï¼šGoogle Cloud AI Platform + BigQuery + Cloud Storage\nåˆ›å»ºè€…ï¼štianxinAI\nå¾®ä¿¡ï¼štianxinAI360\n\nğŸ¯ åŠŸèƒ½ä»‹ç»\n\nè¿™æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„æœºå™¨å­¦ä¹ æ¨¡å‹è‡ªåŠ¨åŒ–æµæ°´çº¿ã€‚å®ƒèƒ½è‡ªåŠ¨å®Œæˆä»æ•°æ®å‡†å¤‡ã€æ¨¡å‹è®­ç»ƒã€è¯„ä¼°åˆ°éƒ¨ç½²ä¸Šçº¿çš„å…¨è¿‡ç¨‹ï¼Œå¹¶æŒç»­ç›‘æ§æ¨¡å‹è¡¨ç°ã€‚\n\nâš¡ ä¸»è¦ç‰¹ç‚¹\n\nå…¨æµç¨‹è¦†ç›–ï¼šä»æ•°æ®æ¸…æ´—åˆ°æ¨¡å‹éƒ¨ç½²ï¼Œ12ä¸ªæ­¥éª¤å®Œæ•´é—­ç¯ã€‚\näº‘ç«¯è‡ªåŠ¨åŒ–ï¼šæ·±åº¦é›†æˆGoogle CloudæœåŠ¡ï¼Œå®ç°äº‘ç«¯è‡ªåŠ¨åŒ–å¤„ç†ã€‚\næŒç»­ä¼˜åŒ–ï¼šåŒ…å«æ•°æ®ç›‘æ§å’Œåé¦ˆç¯èŠ‚ï¼Œæ”¯æŒæ¨¡å‹è¿­ä»£ä¼˜åŒ–ã€‚\nå›¢é˜Ÿåä½œï¼šæ”¯æŒé€šè¿‡é‚®ä»¶å’ŒChaté€šçŸ¥ï¼Œæ–¹ä¾¿å›¢é˜Ÿåä½œã€‚\nğŸ› ï¸ æ ¸å¿ƒæµç¨‹æ­¥éª¤\n\næ•°æ®å‡†å¤‡é˜¶æ®µï¼šæ•°æ®é¢„å¤„ç† â†’ æ•°æ®æ¸…æ´— â†’ æ•°æ®è½¬æ¢\næ¨¡å‹æ„å»ºé˜¶æ®µï¼šç‰¹å¾å·¥ç¨‹ â†’ æ¨¡å‹è®­ç»ƒ â†’ æ¨¡å‹è¯„ä¼°\néƒ¨ç½²è¿ç»´é˜¶æ®µï¼šæ¨¡å‹éƒ¨ç½² â†’ æ•°æ®ç›‘æ§ â†’ åé¦ˆä¼˜åŒ–\nğŸ”§ ä¸»è¦æŠ€æœ¯ç»„ä»¶\n\næ•°æ®å­˜å‚¨ï¼šGoogle Cloud Storageï¼ˆåŸå§‹æ•°æ®ï¼‰\næ•°æ®å¤„ç†ï¼šGoogle BigQueryï¼ˆæ•°æ®æ¸…æ´—ä¸è½¬æ¢ï¼‰\næ¨¡å‹è®­ç»ƒï¼šGoogle Cloud AI Platform Training\næ¨¡å‹éƒ¨ç½²ï¼šGoogle Cloud AI Platform Prediction\nç³»ç»Ÿç›‘æ§ï¼šGoogle Cloud Monitoring\nğŸ’¡ è¾…åŠ©åŠŸèƒ½\n\nç»“æœè¾“å‡ºï¼šç»“æ„åŒ–è¾“å‡ºï¼ˆæ¨¡å‹ç»“æœä¸æŠ¥å‘Šï¼‰\nå›¢é˜Ÿé€šçŸ¥ï¼šå‘é€é‚®ä»¶ã€Google Cloud Chatï¼ˆå…³é”®èŠ‚ç‚¹é€šçŸ¥ï¼‰\næ•°æ®åˆ†æï¼šæ•°æ®å¯è§†åŒ–ï¼ˆç‰¹å¾åˆ†æä¸ç»“æœå±•ç¤ºï¼‰\nğŸ”„ å·¥ä½œæµç‰¹ç‚¹\n\nè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„æœºå™¨å­¦ä¹ è¿ç»´ï¼ˆMLOpsï¼‰æµç¨‹ï¼Œå®ç°äº†ä»æ•°æ®åˆ°æ¨¡å‹å†åˆ°ä¸šåŠ¡åº”ç”¨çš„è‡ªåŠ¨åŒ–é—­ç¯ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦æŒç»­è¿­ä»£çš„æœºå™¨å­¦ä¹ é¡¹ç›®ã€‚\n",
        "height": 784,
        "width": 944
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1008,
        -736
      ],
      "typeVersion": 1,
      "id": "ec6cfca5-fc90-4fa3-9daa-4403fc9d0060",
      "name": "Sticky Note2"
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "æ•°æ®æº",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ•°æ®æº": {
      "main": [
        [
          {
            "node": "åˆ—è¡¨æ‹†åˆ†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆ—è¡¨æ‹†åˆ†": {
      "main": [
        [
          {
            "node": "å¾ªç¯çˆ¬å–ç½‘ç«™",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å¾ªç¯çˆ¬å–ç½‘ç«™": {
      "main": [
        [
          {
            "node": "æ ¼å¼å¤„ç†",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ç­‰å¾…",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è¯†åˆ«å¹¶æå–æ–°é—»é“¾æ¥": {
      "main": [
        [
          {
            "node": "æ–°é—»åˆ—è¡¨æ‹†åˆ†",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "è¯†åˆ«å¹¶æå–æ–°é—»é“¾æ¥",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "è¯†åˆ«å¹¶æå–æ–°é—»é“¾æ¥",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "åˆ¤æ–­æŠ“å–çŠ¶æ€": {
      "main": [
        [
          {
            "node": "é¢„ç­›é€‰ï¼ˆè§„é¿é£æ§ï¼‰",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆ¤æ–­æŠ“å–çŠ¶æ€1": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "æ–°é—»åˆ—è¡¨æ‹†åˆ†": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å¾ªç¯çˆ¬å–æ–°é—»è¯¦æƒ…": {
      "main": [
        [
          {
            "node": "å¾ªç¯çˆ¬å–ç½‘ç«™",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "ç­‰å¾…1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Limit": {
      "main": [
        [
          {
            "node": "å¾ªç¯çˆ¬å–æ–°é—»è¯¦æƒ…",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "æ–°é—»æ’­æŠ¥æ€»ç¼–è¾‘",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "æ ¼å¼å¤„ç†": {
      "main": [
        [
          {
            "node": "è¾“å‡ºèšåˆ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è¾“å‡ºèšåˆ": {
      "main": [
        [
          {
            "node": "æ–°é—»æ’­æŠ¥æ€»ç¼–è¾‘",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ–°é—»æ’­æŠ¥æ€»ç¼–è¾‘": {
      "main": [
        [
          {
            "node": "Send email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "å¾ªç¯çˆ¬å–æ–°é—»è¯¦æƒ…",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "é¢„ç­›é€‰ï¼ˆè§„é¿é£æ§ï¼‰": {
      "main": [
        [
          {
            "node": "è¯†åˆ«å¹¶æå–æ–°é—»é“¾æ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "8d883a89-ef11-4afb-8449-ac68b2d58bd1",
  "meta": {
    "instanceId": "a5f08ede13bceab7d066ab11fb03ba9312e3e584a39630194ecaef89c79e9ee1"
  },
  "id": "56LbLGQy7Xo92oLR",
  "tags": []
}