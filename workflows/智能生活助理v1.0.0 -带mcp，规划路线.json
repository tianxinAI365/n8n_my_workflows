{
  "name": "æ™ºèƒ½ç”Ÿæ´»åŠ©ç†å‰åç«¯ä¸€ä½“åŒ– v1.0.0",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "typeVersion": 1,
      "position": [
        880,
        1072
      ],
      "id": "6034d9c9-6053-4b36-b9af-60cb80603e02",
      "name": "DeepSeek Chat Model"
    },
    {
      "parameters": {
        "endpointUrl": "=https://mcp.amap.com/mcp?key={{ $env.AMAP_API_KEY}}",
        "serverTransport": "httpStreamable",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.1,
      "position": [
        1216,
        1088
      ],
      "id": "06c9735f-0a75-4595-ac2b-7a2feb2ab767",
      "name": "HTTP Streamable"
    },
    {
      "parameters": {
        "content": "## é«˜å¾·åœ°å›¾",
        "height": 220,
        "width": 252,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1136,
        992
      ],
      "id": "3d5882f7-6779-4d86-a7e3-73a9702f4939",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "#### é…ç½®é«˜å¾·åœ°å›¾ API Key ğŸ‘‡",
        "height": 80,
        "width": 214,
        "color": 3
      },
      "id": "aa3dffa2-b964-4eb7-92e3-8eaa060f0a52",
      "name": "Sticky Note14",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1152,
        1056
      ],
      "typeVersion": 1
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "smart-assistant",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        576,
        880
      ],
      "id": "33ef076f-bc89-435c-9fdc-bde584d768ea",
      "name": "è§¦å‘å™¨ï¼šæ¥æ”¶ç”ŸæˆæŒ‡ä»¤",
      "webhookId": "0e5b7c7b-8f3e-4b4e-9d8a-77c8e5e6e6a1"
    },
    {
      "parameters": {
        "path": "smart-life-assistant",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        560,
        640
      ],
      "id": "db4183e5-145d-415e-9a6f-d36adefa94dc",
      "name": "è§¦å‘å™¨ï¼šæä¾›UIç•Œé¢",
      "webhookId": "f7a3f5b1-f3b1-4f2c-8c33-c289912a7a5f"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n<meta charset=\"UTF-8\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n<title>æ™ºèƒ½ç”Ÿæ´»åŠ©ç†</title>\n<style>\n  :root{\n    --primary: #6366f1;\n    --primary-dark: #4f46e5;\n    --secondary: #f59e0b;\n    --bg: #0f172a;\n    --panel: #1e293b;\n    --panel-light: #334155;\n    --text: #f8fafc;\n    --text-muted: #94a3b8;\n    --text-accent: #e2e8f0;\n    --border: #334155;\n    --border-light: #475569;\n    --success: #10b981;\n    --warning: #f59e0b;\n    --error: #ef4444;\n    --font: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;\n  }\n  \n  * { box-sizing: border-box; }\n  html, body { margin: 0; padding: 0; }\n  \n  body {\n    font-family: var(--font);\n    background: var(--bg);\n    color: var(--text);\n    min-height: 100vh;\n    overflow-x: hidden;\n  }\n  \n  /* èƒŒæ™¯åŠ¨æ•ˆ */\n  body::before {\n    content: '';\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: \n      radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),\n      radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),\n      radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);\n    z-index: -1;\n    animation: bgShift 20s ease-in-out infinite;\n  }\n  \n  @keyframes bgShift {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.8; }\n  }\n  \n  @keyframes fadeInScale {\n    0% { \n      opacity: 0; \n      transform: scale(0.8); \n    }\n    100% { \n      opacity: 1; \n      transform: scale(1); \n    }\n  }\n  \n  .container {\n    max-width: 1000px;\n    margin: 0 auto;\n    padding: 40px 20px;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 40px;\n    min-height: 100vh;\n    align-items: start;\n  }\n  \n  @media (max-width: 1024px) {\n    .container {\n      grid-template-columns: 1fr;\n      gap: 30px;\n      max-width: 600px;\n    }\n  }\n  \n  /* å·¦ä¾§æŸ¥è¯¢åŒºåŸŸ */\n  .query-panel {\n    background: var(--panel);\n    border: 1px solid var(--border);\n    border-radius: 24px;\n    padding: 32px;\n    backdrop-filter: blur(20px);\n    box-shadow: \n      0 20px 40px rgba(0, 0, 0, 0.4),\n      inset 0 1px 0 rgba(255, 255, 255, 0.1);\n  }\n  \n  .header {\n    text-align: center;\n    margin-bottom: 36px;\n  }\n  \n  .title {\n    font-size: 32px;\n    font-weight: 700;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    margin: 0 0 12px;\n    letter-spacing: -0.02em;\n  }\n  \n  .subtitle {\n    font-size: 16px;\n    color: var(--text-muted);\n    margin: 0;\n    line-height: 1.6;\n  }\n  \n  /* æŸ¥è¯¢è¡¨å• */\n  .form-group {\n    margin-bottom: 24px;\n  }\n  \n  label {\n    display: block;\n    font-weight: 600;\n    margin-bottom: 12px;\n    color: var(--text-accent);\n    font-size: 16px;\n  }\n  \n  .query-input {\n    width: 100%;\n    padding: 20px 24px;\n    background: var(--panel-light);\n    border: 2px solid var(--border-light);\n    border-radius: 16px;\n    color: var(--text);\n    font-size: 16px;\n    line-height: 1.6;\n    min-height: 120px;\n    resize: vertical;\n    transition: all 0.3s ease;\n    font-family: inherit;\n  }\n  \n  .query-input:focus {\n    outline: none;\n    border-color: var(--primary);\n    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);\n    background: rgba(99, 102, 241, 0.05);\n  }\n  \n  .query-input::placeholder {\n    color: var(--text-muted);\n    line-height: 1.6;\n  }\n  \n  /* å¿«æ·ç¤ºä¾‹ */\n  .examples {\n    margin-bottom: 24px;\n  }\n  \n  .examples-title {\n    font-size: 14px;\n    color: var(--text-muted);\n    margin-bottom: 12px;\n    font-weight: 500;\n  }\n  \n  .example-tags {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 8px;\n  }\n  \n  .example-tag {\n    padding: 8px 16px;\n    background: var(--panel-light);\n    border: 1px solid var(--border-light);\n    border-radius: 20px;\n    color: var(--text-muted);\n    font-size: 13px;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    user-select: none;\n  }\n  \n  .example-tag:hover {\n    border-color: var(--primary);\n    color: var(--primary);\n    background: rgba(99, 102, 241, 0.1);\n    transform: translateY(-1px);\n  }\n  \n  /* æŸ¥è¯¢æŒ‰é’® */\n  .query-btn {\n    width: 100%;\n    padding: 18px 24px;\n    background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);\n    border: none;\n    border-radius: 16px;\n    color: white;\n    font-weight: 700;\n    font-size: 16px;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    position: relative;\n    overflow: hidden;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n  }\n  \n  .query-btn::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n    transition: left 0.6s ease;\n  }\n  \n  .query-btn:hover::before {\n    left: 100%;\n  }\n  \n  .query-btn:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 12px 40px rgba(99, 102, 241, 0.4);\n  }\n  \n  .query-btn:active {\n    transform: translateY(0);\n  }\n  \n  .query-btn:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n  \n  .loading-spinner {\n    width: 20px;\n    height: 20px;\n    border: 2px solid rgba(255, 255, 255, 0.3);\n    border-top: 2px solid white;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n  \n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n  \n  /* å³ä¾§ç»“æœåŒºåŸŸ */\n  .result-panel {\n    background: var(--panel);\n    border: 1px solid var(--border);\n    border-radius: 24px;\n    padding: 32px;\n    backdrop-filter: blur(20px);\n    min-height: 500px;\n    display: flex;\n    flex-direction: column;\n  }\n  \n  .result-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 24px;\n  }\n  \n  .result-title {\n    font-size: 20px;\n    font-weight: 600;\n    color: var(--text-accent);\n    margin: 0;\n  }\n  \n  .clear-btn {\n    padding: 8px 16px;\n    background: var(--panel-light);\n    border: 1px solid var(--border-light);\n    border-radius: 8px;\n    color: var(--text-muted);\n    font-size: 12px;\n    cursor: pointer;\n    transition: all 0.3s ease;\n  }\n  \n  .clear-btn:hover {\n    background: var(--border-light);\n    color: var(--text);\n  }\n  \n  .result-content {\n    flex: 1;\n    position: relative;\n    overflow-y: auto;\n    padding: 8px 0;\n  }\n  \n  .result-content.center-content {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n  }\n  \n  .result-content.has-result {\n    display: block;\n  }\n  \n  .result-placeholder {\n    text-align: center;\n    color: var(--text-muted);\n    max-width: 300px;\n    margin: auto;\n    padding: 40px 20px;\n  }\n  \n  .placeholder-icon {\n    font-size: 48px;\n    margin-bottom: 16px;\n    opacity: 0.5;\n  }\n  \n  .placeholder-text {\n    font-size: 15px;\n    line-height: 1.6;\n  }\n  \n  /* åŠ è½½çŠ¶æ€ */\n  .loading-state {\n    text-align: center;\n    padding: 40px 20px;\n  }\n  \n  .loading-icon {\n    width: 60px;\n    height: 60px;\n    border: 4px solid var(--panel-light);\n    border-top: 4px solid var(--primary);\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin: 0 auto 20px;\n  }\n  \n  .loading-text {\n    color: var(--text-muted);\n    font-size: 16px;\n    margin-bottom: 8px;\n  }\n  \n  .loading-subtext {\n    color: var(--text-muted);\n    font-size: 13px;\n    opacity: 0.8;\n  }\n  \n  /* ç»“æœå±•ç¤º */\n  .result-display {\n    background: var(--panel-light);\n    border: 1px solid var(--border-light);\n    border-radius: 16px;\n    padding: 24px;\n    animation: fadeInScale 0.5s ease-out;\n  }\n  \n  .result-item {\n    margin-bottom: 20px;\n    padding-bottom: 20px;\n    border-bottom: 1px solid var(--border-light);\n  }\n  \n  .result-item:last-child {\n    margin-bottom: 0;\n    padding-bottom: 0;\n    border-bottom: none;\n  }\n  \n  .result-item-title {\n    font-weight: 600;\n    color: var(--text-accent);\n    margin-bottom: 8px;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n  }\n  \n  .result-item-content {\n    color: var(--text);\n    line-height: 1.6;\n    font-size: 15px;\n  }\n  \n  /* HTMLå†…å®¹ç‰¹æ®Šæ ·å¼ */\n  .html-content {\n    font-size: 14px;\n  }\n  \n  .html-content h2 {\n    color: var(--primary);\n    font-size: 18px;\n    font-weight: 700;\n    margin: 20px 0 12px 0;\n    border-bottom: 2px solid var(--border-light);\n    padding-bottom: 8px;\n  }\n  \n  .html-content h3 {\n    color: var(--text-accent);\n    font-size: 16px;\n    font-weight: 600;\n    margin: 16px 0 8px 0;\n  }\n  \n  .html-content h4 {\n    color: var(--text-accent);\n    font-size: 15px;\n    font-weight: 600;\n    margin: 12px 0 6px 0;\n  }\n  \n  .html-content p {\n    margin: 8px 0;\n    line-height: 1.7;\n  }\n  \n  .html-content strong {\n    color: var(--text-accent);\n    font-weight: 600;\n  }\n  \n  .html-content br + br {\n    display: block;\n    margin: 8px 0;\n    content: \"\";\n  }\n  \n  .status-badge {\n    padding: 4px 12px;\n    border-radius: 12px;\n    font-size: 12px;\n    font-weight: 600;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n  }\n  \n  .status-success {\n    background: rgba(16, 185, 129, 0.2);\n    color: var(--success);\n    border: 1px solid rgba(16, 185, 129, 0.3);\n  }\n  \n  .status-warning {\n    background: rgba(245, 158, 11, 0.2);\n    color: var(--warning);\n    border: 1px solid rgba(245, 158, 11, 0.3);\n  }\n  \n  .status-error {\n    background: rgba(239, 68, 68, 0.2);\n    color: var(--error);\n    border: 1px solid rgba(239, 68, 68, 0.3);\n  }\n  \n  /* éšè—ç±» */\n  .hidden { display: none !important; }\n  \n  /* é”™è¯¯çŠ¶æ€ */\n  .error-state {\n    text-align: center;\n    padding: 40px 20px;\n    color: var(--error);\n  }\n  \n  .error-icon {\n    font-size: 48px;\n    margin-bottom: 16px;\n    opacity: 0.8;\n  }\n  \n  .error-title {\n    font-size: 18px;\n    font-weight: 600;\n    margin-bottom: 8px;\n  }\n  \n  .error-message {\n    font-size: 14px;\n    color: var(--text-muted);\n    line-height: 1.5;\n  }\n\n  /* å“åº”å¼ä¼˜åŒ– */\n  @media (max-width: 768px) {\n    .container {\n      padding: 20px 16px;\n    }\n    \n    .query-panel,\n    .result-panel {\n      padding: 24px;\n    }\n    \n    .title {\n      font-size: 28px;\n    }\n    \n    .example-tags {\n      gap: 6px;\n    }\n    \n    .example-tag {\n      font-size: 12px;\n      padding: 6px 12px;\n    }\n  }\n</style>\n</head>\n<body>\n  <div class=\"container\">\n    <!-- å·¦ä¾§æŸ¥è¯¢é¢æ¿ -->\n    <div class=\"query-panel\">\n      <div class=\"header\">\n        <h1 class=\"title\">ğŸ¤– æ™ºèƒ½ç”Ÿæ´»åŠ©ç†</h1>\n        <p class=\"subtitle\">å¤©æ°”æŸ¥è¯¢ Â· åœ°ç‚¹æ¨è Â· ç”Ÿæ´»æœåŠ¡</p>\n      </div>\n      \n      <form id=\"queryForm\">\n        <div class=\"form-group\">\n          <label for=\"queryInput\">è¯·è¾“å…¥æ‚¨çš„é—®é¢˜ï¼š</label>\n          <textarea \n            id=\"queryInput\" \n            class=\"query-input\" \n            placeholder=\"ä¾‹å¦‚ï¼š\nâ€¢ ä¸Šæµ·äººæ°‘å¹¿åœºé™„è¿‘æœ‰ä»€ä¹ˆå¥½çš„å’–å•¡å…å—ï¼Ÿ\nâ€¢ æ˜å¤©å»ä¸Šæµ·å‡ºå·®å¸®æˆ‘æŸ¥ä¸‹å¤©æ°”\nâ€¢ æˆ‘æƒ³å»ä¸‰é‡Œå±¯ï¼ŒæŸ¥ä¸‹å¤©æ°”ï¼Œé¡ºä¾¿æ¨èä¸ªé¤å…\n\næ”¯æŒå¤©æ°”æŸ¥è¯¢ã€åœ°ç‚¹æ¨èã€é¤å…å’–å•¡å…ç­‰ç”Ÿæ´»æœåŠ¡æŸ¥è¯¢...\"\n            required\n          ></textarea>\n        </div>\n        \n        <div class=\"examples\">\n          <div class=\"examples-title\">ğŸ’¡ å¿«æ·ç¤ºä¾‹ï¼ˆç‚¹å‡»å¡«å…¥ï¼‰ï¼š</div>\n          <div class=\"example-tags\">\n            <span class=\"example-tag\" data-query=\"ä¸Šæµ·äººæ°‘å¹¿åœºé™„è¿‘æœ‰ä»€ä¹ˆå¥½çš„å’–å•¡å…å—ï¼Ÿ\">â˜• å’–å•¡å…æ¨è</span>\n            <span class=\"example-tag\" data-query=\"æ˜å¤©å»ä¸Šæµ·å‡ºå·®å¸®æˆ‘æŸ¥ä¸‹å¤©æ°”\">ğŸŒ¤ï¸ å¤©æ°”æŸ¥è¯¢</span>\n            <span class=\"example-tag\" data-query=\"æˆ‘æƒ³å»ä¸‰é‡Œå±¯ï¼ŒæŸ¥ä¸‹å¤©æ°”ï¼Œé¡ºä¾¿æ¨èä¸ªé¤å…\">ğŸ½ï¸ ç»¼åˆæŸ¥è¯¢</span>\n            <span class=\"example-tag\" data-query=\"åŒ—äº¬å›½è´¸é™„è¿‘æœ‰ä»€ä¹ˆå¥½åƒçš„å·èœé¦†ï¼Ÿ\">ğŸŒ¶ï¸ ç¾é£Ÿæ¨è</span>\n            <span class=\"example-tag\" data-query=\"æ·±åœ³æ˜å¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Œé€‚åˆæˆ·å¤–è¿åŠ¨å—ï¼Ÿ\">ğŸƒ è¿åŠ¨å»ºè®®</span>\n          </div>\n        </div>\n        \n        <button type=\"submit\" class=\"query-btn\" id=\"submitBtn\">\n          <span id=\"btnText\">ğŸ” å¼€å§‹æŸ¥è¯¢</span>\n          <div id=\"loadingSpinner\" class=\"loading-spinner hidden\"></div>\n        </button>\n      </form>\n    </div>\n    \n    <!-- å³ä¾§ç»“æœé¢æ¿ -->\n    <div class=\"result-panel\">\n      <div class=\"result-header\">\n        <h2 class=\"result-title\">æŸ¥è¯¢ç»“æœ</h2>\n        <button class=\"clear-btn\" id=\"clearBtn\">æ¸…ç©ºç»“æœ</button>\n      </div>\n      \n      <div class=\"result-content\" id=\"resultContent\">\n        <!-- é»˜è®¤å ä½ç¬¦ -->\n        <div class=\"result-placeholder\" id=\"placeholder\">\n          <div class=\"placeholder-icon\">ğŸ’¬</div>\n          <div class=\"placeholder-text\">\n            åœ¨å·¦ä¾§è¾“å…¥æ‚¨çš„é—®é¢˜<br>\n            æˆ‘å°†ä¸ºæ‚¨æä¾›æ™ºèƒ½åŒ–çš„ç”Ÿæ´»æœåŠ¡å»ºè®®\n          </div>\n        </div>\n        \n        <!-- åŠ è½½çŠ¶æ€ -->\n        <div class=\"loading-state hidden\" id=\"loadingState\">\n          <div class=\"loading-icon\"></div>\n          <div class=\"loading-text\">æ­£åœ¨å¤„ç†æ‚¨çš„è¯·æ±‚...</div>\n          <div class=\"loading-subtext\">AIæ­£åœ¨åˆ†æå¹¶è·å–æœ€æ–°ä¿¡æ¯</div>\n        </div>\n        \n        <!-- é”™è¯¯çŠ¶æ€ -->\n        <div class=\"error-state hidden\" id=\"errorState\">\n          <div class=\"error-icon\">âš ï¸</div>\n          <div class=\"error-title\">è¯·æ±‚å¤±è´¥</div>\n          <div class=\"error-message\" id=\"errorMessage\">ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•</div>\n        </div>\n        \n        <!-- ç»“æœå±•ç¤ºåŒºåŸŸ -->\n        <div class=\"result-display hidden\" id=\"resultDisplay\">\n          <div id=\"resultItems\"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n<script>\n// é…ç½®\nconst WEBHOOK_URL = '/webhook/smart-assistant'; // æ ¹æ®ä½ çš„å®é™…webhookåœ°å€ä¿®æ”¹\n\n// DOM å…ƒç´ \nconst queryForm = document.getElementById('queryForm');\nconst queryInput = document.getElementById('queryInput');\nconst submitBtn = document.getElementById('submitBtn');\nconst btnText = document.getElementById('btnText');\nconst loadingSpinner = document.getElementById('loadingSpinner');\nconst clearBtn = document.getElementById('clearBtn');\n\nconst resultContent = document.getElementById('resultContent');\nconst placeholder = document.getElementById('placeholder');\nconst loadingState = document.getElementById('loadingState');\nconst errorState = document.getElementById('errorState');\nconst errorMessage = document.getElementById('errorMessage');\nconst resultDisplay = document.getElementById('resultDisplay');\nconst resultItems = document.getElementById('resultItems');\n\n// å¿«æ·ç¤ºä¾‹æ ‡ç­¾ç‚¹å‡»äº‹ä»¶\ndocument.querySelectorAll('.example-tag').forEach(tag => {\n  tag.addEventListener('click', () => {\n    const query = tag.dataset.query;\n    queryInput.value = query;\n    queryInput.focus();\n  });\n});\n\n// æ¸…ç©ºç»“æœ\nclearBtn.addEventListener('click', () => {\n  showPlaceholder();\n});\n\n// è¡¨å•æäº¤\nqueryForm.addEventListener('submit', async (e) => {\n  e.preventDefault();\n  \n  const query = queryInput.value.trim();\n  if (!query) {\n    alert('è¯·è¾“å…¥æ‚¨çš„é—®é¢˜');\n    return;\n  }\n  \n  await handleQuery(query);\n});\n\n// å¤„ç†æŸ¥è¯¢\nasync function handleQuery(query) {\n  try {\n    // æ˜¾ç¤ºåŠ è½½çŠ¶æ€\n    showLoading();\n    \n    // å‘é€è¯·æ±‚\n    const response = await fetch(WEBHOOK_URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        query: query,\n        timestamp: new Date().toISOString()\n      })\n    });\n    \n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n    \n    const data = await response.json();\n    \n    // æ˜¾ç¤ºç»“æœ\n    showResult(data);\n    \n  } catch (error) {\n    console.error('æŸ¥è¯¢å¤±è´¥:', error);\n    showError(error.message);\n  }\n}\n\n// æ˜¾ç¤ºå ä½ç¬¦\nfunction showPlaceholder() {\n  hideAll();\n  placeholder.classList.remove('hidden');\n  resultContent.classList.add('center-content');\n  resultContent.classList.remove('has-result');\n  resetButton();\n}\n\n// æ˜¾ç¤ºåŠ è½½çŠ¶æ€\nfunction showLoading() {\n  hideAll();\n  loadingState.classList.remove('hidden');\n  resultContent.classList.add('center-content');\n  resultContent.classList.remove('has-result');\n  \n  // æ›´æ–°æŒ‰é’®çŠ¶æ€\n  submitBtn.disabled = true;\n  btnText.textContent = 'æŸ¥è¯¢ä¸­...';\n  loadingSpinner.classList.remove('hidden');\n}\n\n// æ˜¾ç¤ºé”™è¯¯\nfunction showError(message) {\n  hideAll();\n  errorState.classList.remove('hidden');\n  resultContent.classList.add('center-content');\n  resultContent.classList.remove('has-result');\n  errorMessage.textContent = message || 'è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';\n  resetButton();\n}\n\n// æ˜¾ç¤ºç»“æœ\nfunction showResult(data) {\n  hideAll();\n  resultDisplay.classList.remove('hidden');\n  resultContent.classList.remove('center-content');\n  resultContent.classList.add('has-result');\n  resetButton();\n  \n  // æ¸²æŸ“ç»“æœå†…å®¹\n  renderResult(data);\n  \n  // é‡æ–°è°ƒæ•´é«˜åº¦ä»¥ç¡®ä¿æ»šåŠ¨æ­£å¸¸å·¥ä½œ\n  setTimeout(() => {\n    syncPanelHeights();\n  }, 100);\n}\n\n// éšè—æ‰€æœ‰çŠ¶æ€\nfunction hideAll() {\n  placeholder.classList.add('hidden');\n  loadingState.classList.add('hidden');\n  errorState.classList.add('hidden');\n  resultDisplay.classList.add('hidden');\n}\n\n// é‡ç½®æŒ‰é’®çŠ¶æ€\nfunction resetButton() {\n  submitBtn.disabled = false;\n  btnText.textContent = 'ğŸ” å¼€å§‹æŸ¥è¯¢';\n  loadingSpinner.classList.add('hidden');\n}\n\n// æ¸²æŸ“ç»“æœå†…å®¹\nfunction renderResult(data) {\n  resultItems.innerHTML = '';\n  \n  // å¦‚æœè¿”å›çš„æ˜¯å­—ç¬¦ä¸²ï¼Œç›´æ¥æ˜¾ç¤º\n  if (typeof data === 'string') {\n    const item = createResultItem('ğŸ¤– AIåŠ©ç†å›å¤', data, 'success');\n    resultItems.appendChild(item);\n    return;\n  }\n  \n  // å¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡ï¼Œå°è¯•è§£æç»“æ„\n  if (data && typeof data === 'object') {\n    // å¤„ç†å¤©æ°”ä¿¡æ¯\n    if (data.weather) {\n      const weatherItem = createResultItem(\n        'ğŸŒ¤ï¸ å¤©æ°”ä¿¡æ¯', \n        formatWeatherInfo(data.weather),\n        'success'\n      );\n      resultItems.appendChild(weatherItem);\n    }\n    \n    // å¤„ç†åœ°ç‚¹æ¨è\n    if (data.recommendations) {\n      const recItem = createResultItem(\n        'ğŸ“ æ¨èåœ°ç‚¹', \n        formatRecommendations(data.recommendations),\n        'success'\n      );\n      resultItems.appendChild(recItem);\n    }\n    \n    // å¤„ç†é€šç”¨å›å¤\n    if (data.response || data.message) {\n      const responseItem = createResultItem(\n        'ğŸ¤– AIåŠ©ç†å›å¤', \n        data.response || data.message,\n        'success'\n      );\n      resultItems.appendChild(responseItem);\n    }\n    \n    // å¦‚æœæ²¡æœ‰è¯†åˆ«çš„å­—æ®µï¼Œæ˜¾ç¤ºåŸå§‹æ•°æ®\n    if (!data.weather && !data.recommendations && !data.response && !data.message) {\n      const rawItem = createResultItem(\n        'ğŸ“„ æŸ¥è¯¢ç»“æœ', \n        JSON.stringify(data, null, 2),\n        'success'\n      );\n      resultItems.appendChild(rawItem);\n    }\n  }\n  \n  // å¦‚æœç»“æœä¸ºç©º\n  if (resultItems.children.length === 0) {\n    const emptyItem = createResultItem(\n      'â“ æ— ç»“æœ', \n      'æŠ±æ­‰ï¼Œæ²¡æœ‰æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ï¼Œè¯·å°è¯•é‡æ–°è¡¨è¾¾æ‚¨çš„é—®é¢˜ã€‚',\n      'warning'\n    );\n    resultItems.appendChild(emptyItem);\n  }\n}\n\n// åˆ›å»ºç»“æœé¡¹\nfunction createResultItem(title, content, status = 'success') {\n  const item = document.createElement('div');\n  item.className = 'result-item';\n  \n  const statusClass = `status-${status}`;\n  const statusText = {\n    success: 'æˆåŠŸ',\n    warning: 'æ³¨æ„',\n    error: 'é”™è¯¯'\n  }[status] || 'ä¿¡æ¯';\n  \n  item.innerHTML = `\n    <div class=\"result-item-title\">\n      ${title}\n      <span class=\"status-badge ${statusClass}\">${statusText}</span>\n    </div>\n    <div class=\"result-item-content\">${formatContent(content)}</div>\n  `;\n  \n  return item;\n}\n\n// æ ¼å¼åŒ–å†…å®¹\nfunction formatContent(content) {\n  if (typeof content === 'string') {\n    // å°†æ¢è¡Œç¬¦è½¬æ¢ä¸ºHTMLæ¢è¡Œ\n    return content.replace(/\\n/g, '<br>');\n  }\n  return String(content);\n}\n\n// æ ¼å¼åŒ–å¤©æ°”ä¿¡æ¯\nfunction formatWeatherInfo(weather) {\n  if (typeof weather === 'string') return weather;\n  \n  let result = '';\n  if (weather.city) result += `ğŸ“ ${weather.city}<br>`;\n  if (weather.temperature) result += `ğŸŒ¡ï¸ æ¸©åº¦ï¼š${weather.temperature}<br>`;\n  if (weather.condition) result += `â˜ï¸ å¤©æ°”ï¼š${weather.condition}<br>`;\n  if (weather.humidity) result += `ğŸ’§ æ¹¿åº¦ï¼š${weather.humidity}<br>`;\n  if (weather.wind) result += `ğŸ’¨ é£åŠ›ï¼š${weather.wind}<br>`;\n  \n  return result || 'å¤©æ°”ä¿¡æ¯è·å–æˆåŠŸ';\n}\n\n// æ ¼å¼åŒ–æ¨èä¿¡æ¯\nfunction formatRecommendations(recommendations) {\n  if (typeof recommendations === 'string') return recommendations;\n  \n  if (Array.isArray(recommendations)) {\n    return recommendations.map((item, index) => {\n      if (typeof item === 'string') {\n        return `${index + 1}. ${item}`;\n      } else if (item.name) {\n        let result = `${index + 1}. ${item.name}`;\n        if (item.address) result += ` - ${item.address}`;\n        if (item.rating) result += ` (è¯„åˆ†: ${item.rating})`;\n        return result;\n      }\n      return `${index + 1}. ${JSON.stringify(item)}`;\n    }).join('<br>');\n  }\n  \n  return JSON.stringify(recommendations, null, 2);\n}\n\n// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–\ndocument.addEventListener('DOMContentLoaded', () => {\n  showPlaceholder();\n  queryInput.focus();\n  \n  // åŒæ­¥å·¦å³é¢æ¿é«˜åº¦\n  syncPanelHeights();\n  \n  // ç›‘å¬çª—å£å¤§å°å˜åŒ–\n  window.addEventListener('resize', syncPanelHeights);\n});\n\n// åŒæ­¥å·¦å³é¢æ¿é«˜åº¦\nfunction syncPanelHeights() {\n  const queryPanel = document.querySelector('.query-panel');\n  const resultPanel = document.querySelector('.result-panel');\n  const resultContent = document.querySelector('.result-content');\n  \n  if (queryPanel && resultPanel && resultContent) {\n    // è·å–å·¦ä¾§é¢æ¿çš„å®é™…é«˜åº¦\n    const queryPanelHeight = queryPanel.offsetHeight;\n    \n    // è®¾ç½®å³ä¾§é¢æ¿é«˜åº¦åŒ¹é…å·¦ä¾§\n    resultPanel.style.height = queryPanelHeight + 'px';\n    \n    // è®¡ç®—å³ä¾§å†…å®¹åŒºåŸŸçš„å¯ç”¨é«˜åº¦\n    const resultHeader = document.querySelector('.result-header');\n    const headerHeight = resultHeader ? resultHeader.offsetHeight : 60;\n    const availableHeight = queryPanelHeight - headerHeight - 64; // 64pxä¸ºä¸Šä¸‹padding\n    \n    // è®¾ç½®å†…å®¹åŒºåŸŸé«˜åº¦\n    resultContent.style.maxHeight = availableHeight + 'px';\n    resultContent.style.minHeight = Math.min(400, availableHeight) + 'px';\n  }\n}\n</script>\n</body>\n</html>",
        "options": {
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "text/html"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        752,
        640
      ],
      "id": "1a535968-3932-45c2-a048-361e4e9cd730",
      "name": "å“åº”ï¼šè¿”å›UIç•Œé¢HTML"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={ \n  \"response\": {{ JSON.stringify($json.html) }}\n} ",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        1616,
        880
      ],
      "id": "4be78fdb-efd7-42a5-adfa-1303d3a03ead",
      "name": "è¿”å›æœ€ç»ˆJSONç»“æœ"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## å½“å‰æ—¶é—´åŸºå‡†ï¼ˆå…³é”®å‚è€ƒï¼‰\n\nåŸºå‡†ï¼šä»Šå¤© = {{$now.toFormat('yyyy-MM-dd')}} (æ˜ŸæœŸ{{ ['ä¸€','äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­', 'æ—¥'][$now.get('weekday') - 1] }})\n\n{{ $json.chatInput }}",
        "options": {
          "systemMessage": "=ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½ç”Ÿæ´»åŠ©æ‰‹ï¼Œé…å¤‡äº†é«˜å¾·åœ°å›¾å·¥å…·ï¼Œè¯·æ³¨æ„ä»¥ä¸‹è¦æ±‚ï¼š\n\n## åŸºæœ¬åŸåˆ™\n1. å§‹ç»ˆä½¿ç”¨ä¸­æ–‡å›å¤ç”¨æˆ·\n2. ä¿æŒä¸“ä¸šä½†ä¸å¤±äº²åˆ‡çš„è¯­æ°”  \n3. å¦‚æœä¸ç¡®å®šç­”æ¡ˆï¼Œè¯·è¯šå®å‘ŠçŸ¥\n\n## å·¥å…·ä½¿ç”¨æŒ‡å—\nå½“ç”¨æˆ·è¯¢é—®ä»¥ä¸‹ä¿¡æ¯æ—¶ï¼Œä¸»åŠ¨è°ƒç”¨ç›¸åº”å·¥å…·ï¼š\n\n### å¤©æ°”æŸ¥è¯¢\n- å…³é”®è¯ï¼šå¤©æ°”ã€æ°”æ¸©ã€ä¸‹é›¨ã€æ™´å¤©ç­‰\n- è¡ŒåŠ¨ï¼šè°ƒç”¨å¤©æ°”æŸ¥è¯¢å·¥å…·\n- è¾“å‡ºæ ¼å¼ï¼šä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹æ¨¡æ¿ç”Ÿæˆä¸ªæ€§åŒ–å¤©æ°”é¢„æŠ¥\n  \n**å¤©æ°”é¢„æŠ¥è¾“å‡ºæ¨¡æ¿ï¼š**\n1. ğŸŒ¤ï¸ ä»Šæ—¥å¤©æ°”æ¦‚å†µ\n2. ğŸŒ¡ï¸ æ¸©åº¦å’Œä½“æ„Ÿæ¸©åº¦  \n3. ğŸ‘” ç©¿è¡£å»ºè®®\n4. ğŸš— å‡ºè¡Œæé†’\n5. ğŸ’¡ ç”Ÿæ´»å°è´´å£«\n\nè¦æ±‚ï¼š\n- è¯­è¨€ç”ŸåŠ¨å‹å¥½ï¼Œé€‚åˆæ—¥å¸¸é˜…è¯»\n- åŒ…å«å®ç”¨çš„ç”Ÿæ´»å»ºè®®\n- ä½¿ç”¨emojiå¢åŠ å¯è¯»æ€§\n- æ€»é•¿åº¦æ§åˆ¶åœ¨200-300å­—\n\n### åœ°ç‚¹æŸ¥è¯¢\n- å…³é”®è¯ï¼šåœ¨å“ªé‡Œã€åœ°å€ã€æ€ä¹ˆå»ã€è·¯çº¿ã€é™„è¿‘ã€å‘¨è¾¹ã€æ‰¾ç­‰\n- è¡ŒåŠ¨ï¼šè°ƒç”¨åœ°å€æœç´¢ã€å‘¨è¾¹æœç´¢æˆ–è·¯å¾„è§„åˆ’å·¥å…·\n- è¾“å‡ºæ ¼å¼ï¼š\n  - ä½¿ç”¨ğŸ“æ ‡æ³¨åœ°å€ä½ç½®\n  - ç”¨â­æ ‡æ³¨è¯„åˆ†ä¿¡æ¯\n  - ç”¨ğŸš¶â€â™‚ï¸ğŸš—æ ‡æ³¨è·ç¦»å’Œäº¤é€šæ–¹å¼\n  - æä¾›**å…·ä½“çš„æ•°å­—å’Œè·ç¦»**\n  - æŒ‰**è·ç¦»å’Œè¯„åˆ†æ’åº**æ¨è\n\n**åœ°ç‚¹æŸ¥è¯¢è¾“å‡ºç¤ºä¾‹ï¼š**\n```\nğŸ“ [åœ°ç‚¹åç§°]\nğŸ¢ è¯¦ç»†åœ°å€\nâ­ è¯„åˆ† | ğŸš¶â€â™‚ï¸ è·ç¦»ä¿¡æ¯\nğŸ’¡ ç‰¹è‰²è¯´æ˜æˆ–å»ºè®®\n```\n\n## é”™è¯¯å¤„ç†\n- å¦‚æœåœ°ç‚¹ä¸æ˜ç¡®ï¼Œè¯¢é—®ç”¨æˆ·å…·ä½“ä½ç½®\n- å¦‚æœå·¥å…·è°ƒç”¨å¤±è´¥ï¼Œè¯´æ˜åŸå› å¹¶æä¾›æ›¿ä»£æ–¹æ¡ˆ\n- å¯¹äºè¶…å‡ºå·¥å…·èƒ½åŠ›çš„è¯·æ±‚ï¼Œè¯šå®è¯´æ˜é™åˆ¶",
          "maxIterations": 20
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        944,
        880
      ],
      "id": "6c1e16cd-652e-4d31-bea4-27de5653d534",
      "name": "æ™ºèƒ½åŠ©ç†æ ¸å¿ƒ"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e52d40ef-ea3d-4e33-80f3-1f2b62a452d6",
              "name": "chatInput",
              "value": "={{ $json.body.query }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        752,
        880
      ],
      "id": "11e14fa8-6537-4300-9215-ba50ea71f4af",
      "name": "å‚æ•°æå–å™¨"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ae37f8b8-53a4-412d-bc77-b5fd873ad816",
              "name": "html",
              "value": "={{ $json.output }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1408,
        880
      ],
      "id": "2e97445e-9dd9-4362-8b35-fe734e7deb89",
      "name": "å­—æ®µå¤„ç†å™¨"
    },
    {
      "parameters": {
        "content": "ğŸ¤– æ™ºèƒ½ç”Ÿæ´»åŠ©ç† AI Agent å‰åç«¯ä¸€ä½“åŒ–\nğŸ“‹ åŸºæœ¬ä¿¡æ¯\nåå­—ï¼šæ™ºèƒ½ç”Ÿæ´»åŠ©ç† AI Agent å‰åç«¯ä¸€ä½“åŒ–\nç‰ˆæœ¬ï¼šv1.0.0\næ¶æ„ï¼šAI Agent + MCPå·¥å…· + å‰åç«¯ä¸€ä½“åŒ–\næŠ€æœ¯ï¼šN8N + DeepSeek + é«˜å¾·åœ°å›¾ MCP + HTML/CSS/JS\nä½œè€…ï¼štianxinAI\nå¾®ä¿¡ï¼štianxinAI360\nğŸ¯ åŠŸèƒ½ä»‹ç»\nè¿™æ˜¯ä¸€ä¸ªåŸºäºAI Agentçš„å…¨æ ˆæ™ºèƒ½ç”Ÿæ´»åŠ©æ‰‹ï¼Œæ¥å…¥äº†é«˜å¾·åœ°å›¾MCPå·¥å…·ï¼Œæœ‰å®Œæ•´çš„ç½‘é¡µç•Œé¢å’ŒAPIæ¥å£ã€‚\nå¯ä»¥æŸ¥å¤©æ°”ã€æœåœ°ç‚¹ã€è§„åˆ’è·¯çº¿ç­‰ç­‰ï¼Œå‰ç«¯ç•Œé¢æ˜¯ç°ä»£åŒ–çš„å“åº”å¼è®¾è®¡ï¼Œåç«¯æä¾›RESTful APIã€‚\nâš¡ ä¸»è¦ç‰¹ç‚¹\nå‰åç«¯ä¸€ä½“ï¼šä¸€ä¸ªå·¥ä½œæµæå®šæ•´ä¸ªWebåº”ç”¨å’ŒAPI\nå“åº”å¼ç•Œé¢ï¼šæ·±è‰²ä¸»é¢˜ï¼Œæ‰‹æœºç”µè„‘éƒ½èƒ½çœ‹\nå®æ—¶äº¤äº’ï¼šç”¨Ajaxè¯·æ±‚ï¼Œä½“éªŒå¾ˆæµç•…\næ™ºèƒ½å¯¹è¯ï¼šç”¨DeepSeekæ¨¡å‹ç†è§£å¹¶å›å¤è‡ªç„¶è¯­è¨€\nå·¥å…·é›†æˆï¼šæ¥å…¥é«˜å¾·åœ°å›¾MCPï¼Œèƒ½è·å–å®æ—¶åœ°ç†æ•°æ®\nçŠ¶æ€ç®¡ç†ï¼šæœ‰åŠ è½½ã€å‡ºé”™ã€æˆåŠŸç­‰å„ç§çŠ¶æ€æç¤º\næ»šåŠ¨ä¼˜åŒ–ï¼šå¸ƒå±€å›ºå®šï¼Œæ•°æ®å¤šä¹Ÿèƒ½é¡ºç•…æ»šåŠ¨æŸ¥çœ‹\nğŸ› ï¸ æ”¯æŒçš„åŠŸèƒ½\nç½‘é¡µæœåŠ¡ï¼šæä¾›å®Œæ•´çš„HTMLå‰ç«¯ç•Œé¢\nå¤©æ°”æŸ¥è¯¢APIï¼šæœ‰ä¸ªæ€§åŒ–å¤©æ°”é¢„æŠ¥å’Œç”Ÿæ´»å»ºè®®\nåœ°ç‚¹æœç´¢APIï¼šå¯ä»¥æŸ¥åœ°å€å’Œå‘¨è¾¹æ¨è\nè·¯å¾„è§„åˆ’APIï¼šæ”¯æŒå¤šç§å‡ºè¡Œæ–¹å¼çš„è·¯çº¿è§„åˆ’\nå®æ—¶æ•°æ®APIï¼šèƒ½ç®—è·ç¦»ã€ä¼°æ—¶é—´  ",
        "height": 496,
        "width": 768,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        224,
        80
      ],
      "id": "570ae873-2899-46b8-a300-bc3b23dc8431",
      "name": "Sticky Note"
    }
  ],
  "pinData": {},
  "connections": {
    "DeepSeek Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "æ™ºèƒ½åŠ©ç†æ ¸å¿ƒ",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Streamable": {
      "ai_tool": [
        [
          {
            "node": "æ™ºèƒ½åŠ©ç†æ ¸å¿ƒ",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "è§¦å‘å™¨ï¼šæ¥æ”¶ç”ŸæˆæŒ‡ä»¤": {
      "main": [
        [
          {
            "node": "å‚æ•°æå–å™¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è§¦å‘å™¨ï¼šæä¾›UIç•Œé¢": {
      "main": [
        [
          {
            "node": "å“åº”ï¼šè¿”å›UIç•Œé¢HTML",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ™ºèƒ½åŠ©ç†æ ¸å¿ƒ": {
      "main": [
        [
          {
            "node": "å­—æ®µå¤„ç†å™¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å‚æ•°æå–å™¨": {
      "main": [
        [
          {
            "node": "æ™ºèƒ½åŠ©ç†æ ¸å¿ƒ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å­—æ®µå¤„ç†å™¨": {
      "main": [
        [
          {
            "node": "è¿”å›æœ€ç»ˆJSONç»“æœ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "63e9970c-adfa-4747-b8f0-44b03b39c8c2",
  "meta": {
    "instanceId": "a5f08ede13bceab7d066ab11fb03ba9312e3e584a39630194ecaef89c79e9ee1"
  },
  "id": "AH0vsIdfcvMDWyH6",
  "tags": []
}